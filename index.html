<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéÅ Birthday Surprise</title>
<style>
    body {
        margin: 0;
        font-family: 'Segoe UI', sans-serif;
        background: radial-gradient(circle at center, #ffdde1, #ee9ca7);
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        min-height: 100vh;
        overflow: hidden;
    }
    h1, h2, p { color: #fff; text-align: center; }
    #inputSection {
        background: rgba(0,0,0,0.4);
        padding: 20px;
        border-radius: 15px;
        text-align: center;
    }
    input {
        padding: 10px;
        border-radius: 8px;
        border: none;
        margin-bottom: 10px;
        font-size: 16px;
    }
    button {
        padding: 10px 20px;
        border-radius: 8px;
        border: none;
        background: #ff4e50;
        color: #fff;
        cursor: pointer;
        font-size: 16px;
    }
    #giftBox {
        font-size: 80px;
        cursor: pointer;
        animation: bounce 1s infinite;
    }
    @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }
    #photo {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        object-fit: cover;
        border: 5px solid white;
        margin-bottom: 15px;
        display: none;
    }
    .hidden { display: none; }
    .message {
        font-size: 1.2em;
        background: rgba(0,0,0,0.5);
        padding: 15px;
        border-radius: 10px;
        max-width: 350px;
        margin-top: 15px;
        white-space: pre-line;
    }
    canvas {
        position: fixed;
        top:0;
        left:0;
        pointer-events:none;
    }
</style>
</head>
<body>

<div id="inputSection">
    <h2>üéâ Create Birthday Surprise</h2>
    <input type="text" id="nameInput" placeholder="Enter Name">
    <button onclick="generateLink()">Generate Link</button>
    <p id="generatedLink"></p>
</div>

<img id="photo" src="suma.jpg" alt="Friend Photo">
<div id="giftSection" class="hidden">
    <div id="giftBox">üéÅ</div>
    <div id="wishes" class="hidden">
        <h1 id="title"></h1>
        <div class="message" id="messageText"></div>
    </div>
</div>

<audio id="bgMusic" src="happy.mp3" loop></audio>
<canvas id="confettiCanvas"></canvas>
<canvas id="balloonCanvas"></canvas>
<canvas id="fireworksCanvas"></canvas>

<script>
const urlParams = new URLSearchParams(window.location.search);
const nameParam = urlParams.get('name');

function generateLink() {
    let name = document.getElementById('nameInput').value.trim();
    if (!name) { alert("Please enter a name!"); return; }
    let link = window.location.origin + window.location.pathname + "?name=" + encodeURIComponent(name);
    document.getElementById('generatedLink').innerHTML = `<a href="${link}" target="_blank">${link}</a>`;
}

if (nameParam) {
    document.getElementById('inputSection').style.display = 'none';
    document.getElementById('giftSection').classList.remove('hidden');
}

document.getElementById('giftBox').addEventListener('click', () => {
    document.getElementById('photo').style.display = 'block';
    document.getElementById('giftBox').style.display = 'none';
    document.getElementById('wishes').classList.remove('hidden');
    document.getElementById('bgMusic').play();
    startConfetti();
    startBalloons();
    startFireworks();
    typeWriter(`Happy Birthday ${nameParam}! üéÇ`, "title", 70, () => {
        typeWriter(`Happy Birthday to my officially licensed jogra partner! üòú
Tor loge jodi ami kunudin na mati taile amar kache dinta osompurno lage ‚Äî
Amra Jogra kori, abar ek second e mishi jai.
Ami chai tui amar loge always oula jogra kor, maya o korich! üòÇ
May your day be full of cake, gifts, and no fight with me (at least today)! üíù`, "messageText", 30);
    });
});

// Typewriter effect
function typeWriter(text, elementId, speed, callback) {
    let i = 0;
    const element = document.getElementById(elementId);
    element.innerHTML = "";
    function typing() {
        if (i < text.length) {
            element.innerHTML += text.charAt(i);
            i++;
            setTimeout(typing, speed);
        } else if (callback) {
            callback();
        }
    }
    typing();
}

// Confetti effect
let confettiCanvas = document.getElementById('confettiCanvas');
let ctxC = confettiCanvas.getContext('2d');
let confetti = [];
function startConfetti() {
    confetti = Array.from({length: 150}, () => ({
        x: Math.random() * window.innerWidth,
        y: Math.random() * window.innerHeight - window.innerHeight,
        r: Math.random() * 6 + 4,
        d: Math.random() * 10 + 5,
        color: `hsl(${Math.random()*360},100%,50%)`
    }));
    drawConfetti();
}
function drawConfetti() {
    confettiCanvas.width = window.innerWidth;
    confettiCanvas.height = window.innerHeight;
    ctxC.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
    confetti.forEach(c => {
        ctxC.beginPath();
        ctxC.fillStyle = c.color;
        ctxC.arc(c.x, c.y, c.r, 0, Math.PI*2);
        ctxC.fill();
    });
    confetti.forEach(c => {
        c.y += Math.random() + 1;
        if (c.y > window.innerHeight) {
            c.x = Math.random() * window.innerWidth;
            c.y = -10;
        }
    });
    requestAnimationFrame(drawConfetti);
}

// Balloons effect
let balloonCanvas = document.getElementById('balloonCanvas');
let ctxB = balloonCanvas.getContext('2d');
let balloons = [];
function startBalloons() {
    balloons = Array.from({length: 15}, () => ({
        x: Math.random() * window.innerWidth,
        y: window.innerHeight + Math.random() * 100,
        r: 20 + Math.random() * 15,
        color: `hsl(${Math.random()*360},70%,60%)`
    }));
    drawBalloons();
}
function drawBalloons() {
    balloonCanvas.width = window.innerWidth;
    balloonCanvas.height = window.innerHeight;
    ctxB.clearRect(0,0,balloonCanvas.width,balloonCanvas.height);
    balloons.forEach(b => {
        ctxB.beginPath();
        ctxB.fillStyle = b.color;
        ctxB.ellipse(b.x, b.y, b.r*0.8, b.r, 0, 0, Math.PI*2);
        ctxB.fill();
        b.y -= 1;
        if (b.y < -50) {
            b.x = Math.random() * window.innerWidth;
            b.y = window.innerHeight + 50;
        }
    });
    requestAnimationFrame(drawBalloons);
}

// Fireworks effect
let fireworksCanvas = document.getElementById('fireworksCanvas');
let ctxF = fireworksCanvas.getContext('2d');
let fireworks = [];
function startFireworks() {
    setInterval(() => {
        let x = Math.random() * window.innerWidth;
        let y = Math.random() * window.innerHeight/2;
        let colors = `hsl(${Math.random()*360},100%,50%)`;
        for (let i = 0; i < 30; i++) {
            fireworks.push({
                x: x, y: y, r: 2,
                dx: Math.cos((i*12)*Math.PI/180) * (Math.random()*4+2),
                dy: Math.sin((i*12)*Math.PI/180) * (Math.random()*4+2),
                color: colors, life: 100
            });
        }
    }, 1000);
    drawFireworks();
}
function drawFireworks() {
    fireworksCanvas.width = window.innerWidth;
    fireworksCanvas.height = window.innerHeight;
    ctxF.clearRect(0,0,fireworksCanvas.width,fireworksCanvas.height);
    fireworks.forEach((p,i) => {
        ctxF.beginPath();
        ctxF.fillStyle = p.color;
        ctxF.arc(p.x, p.y, p.r, 0, Math.PI*2);
        ctxF.fill();
        p.x += p.dx;
        p.y += p.dy;
        p.life--;
    });
    fireworks = fireworks.filter(p => p.life > 0);
    requestAnimationFrame(drawFireworks);
}
</script>

</body>
</html>
